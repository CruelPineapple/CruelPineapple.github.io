<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>关于微信小程序(列表渲染及登录) | Ssandra Lee's Page</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.2.0"></head><body><header><nav><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><div id="post-info"><span>date:<time datetime="2020-11-25T15:11:15.804Z" id="date"> 2020-11-25</time></span><br><span>updated:<time datetime="2020-11-27T09:52:05.060Z" id="updated"> 2020-11-27</time></span></div><h1>关于微信小程序(列表渲染及登录)</h1><hr></div><div id="post-content"><p><strong>首先泪目一波，我commit断了</strong></p>
<p>2020年11月26日，因为我的懒惰在开发河畔13周年小程序之外没有学习任何东西，弄断了持续三个月的绿色砖块。</p>
<p>好吧，简单总结一下列表渲染和登录这部分东西</p>
<h3 id="关于列表渲染"><a href="#关于列表渲染" class="headerlink" title="关于列表渲染"></a>关于列表渲染</h3><p>小程序中两处使用了列表渲染，牌库展示部分和积分榜部分。</p>
<p>积分榜部分是比较简单的，前三个列表项通过条件渲染分别增加一个奖牌的图标，其余的列表项使用数组的index属性+1作为排名即可，在阅读过Vue文档的前提下很好理解这种操作。</p>
<p>然后就是牌库展示部分，这部分比较特别的就是需要把表示卡牌的数字转换为图片对应的文件，简单来说就是通过更改图片文件的名字实现了：</p>
<p>图片的名字直接对应数组元素的值，例如黑桃2，在数组中用数字1表示，那么黑桃2对应的图片就重命名为1.png，而图片的src是可以使用插值表达式的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plain">&lt;view wx:for&#x3D;&quot;&#123;&#123;cardArr&#125;&#125;&quot;&gt;<br>	&lt;image src&#x3D;&#x2F;images&#x2F;card&#x2F;&#123;&#123;item&#125;&#125;.png&gt;<br>&lt;&#x2F;iew&gt;<br></code></pre></td></tr></table></figure>

<p>大概就像这样，和Vue挺像的。</p>
<h3 id="然后是登录"><a href="#然后是登录" class="headerlink" title="然后是登录"></a>然后是登录</h3><p>首先登录就需要做一些本地的检测和提示，比如：</p>
<p>信息没有填完整，通过调用微信的api：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain">wx.showModal(&#123;<br>	title: &#39;&#39;,<br>	content: &#39;&#39;,<br>	confirmText: &#39;&#39;,<br>	showCancel :false<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>弹出提示。showModal方法还可以传入其他的属性例如颜色等，但是不能形成图片弹窗，因此本小程序需要图片弹窗的功能是手动实现的(在后续的文章会提到)。</p>
<p>同时为了做唯一性认证，获取用户的openid并传给后台，这部分通过云函数实现了，常规方式需要调用wx.login()方法，我其实比较惧怕这个，前端和后台都比较麻烦，虽然之前做h5的时候写过但还是很怕。有了云函数就能很方便的获得用户唯一的openid了(后续的文章再展开吧)</p>
<div id="paginator"></div></div><div id="post-footer"><hr><a href="/2020/11/28/%E5%85%B3%E4%BA%8E%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F3/">← Prev 关于微信小程序(云函数和更多有关登录的)</a><span style="color: #fe2"> | </span><a href="/2020/11/22/%E5%85%B3%E4%BA%8E%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">关于微信小程序(表单等) Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><details id="reward"><summary>打赏</summary><div id="alipay"><span>支付宝 | Alipay</span><br><img src="/img/Alipay.png"></div><div id="wechat"><span>微信 | WeChat</span><br><img src="/img/WeChat.png"></div></details><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: 'WPGFyW0DFUta4CV3jXQy2ibS-gzGzoHsz'
 , appKey: 'dVbL3vuRvB2BnEdnLYT5dBDd'
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://avatars2.githubusercontent.com/u/56106017?s=460&amp;u=d58a87ce9b7c93adb69c3d91b21ca05a858b3a62&amp;v=4" alt="Logo"></a><h1 id="Dr"><a target="_blank" rel="noopener" href="https://github.com/CruelPineapple"> Dr.Ssandra Lee</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">38</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">7</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">3</span></div></section></div><div id="aside-block"><h1>INDEX</h1><div id="post-index"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">1.</span> <span class="toc-text">关于列表渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E6%98%AF%E7%99%BB%E5%BD%95"><span class="toc-number">2.</span> <span class="toc-text">然后是登录</span></a></li></ol></div></div><footer><nobr><span class="text-title">©</span><span class="text-content">1970 to 2020</span></nobr><wbr><nobr><span class="text-title">ICP</span><span class="text-content">100044889</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>